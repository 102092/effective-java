# 최적화는 신중히 하라



## 질문

- 인스턴스를 불변으로 만드는 것이 어떻게 성능상 문제를 줄일 수 있을까?
  - 해당 인스턴스가 가변이라면, thread safe하기 위해서, 방어적 복사를 해야한다 -> 즉 매번 인스턴스를 만드는 것은 성능상 문제가 생길 수 있다.
  - 불변이라면 방어적 복사로 일어날, 문제를 줄일 수 있을 것이다.
  - 그렇지만 생각해보면, 어떤 객체가 불변이라면 클라이언트 요청마다 불변 객체를 만들어서 줘야한다고 이해된다. 
    - 하지만 불변이란 특징 때문에, 스레드 환경에서는 에러가 발생할 가능성을 줄여줄 거라 생각된다.
    - 그래서 불변 객체를 사용하는 것에도 이 점이 있다고 이해된다.

## 정리

- 내부 데이터를 변경하게 만들지 말라
- 프로파일링 툴 (JMH)
- 자바의 성능 모델은 정교하지 않을 뿐더라 구현 시스템, 릴리즈, 프로세서 마다 차이가 있다.

